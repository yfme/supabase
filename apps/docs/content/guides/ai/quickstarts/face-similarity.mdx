---
id: 'ai-vecs-python-client'
title: '面部相似度搜索'
subtitle: '使用 Supabase Vecs 识别与您最相似的名人。'
---

本指南将带您完成一个["面部相似度搜索"](https://github.com/supabase/supabase/blob/master/examples/ai/face_similarity.ipynb)示例，使用 Colab 和 Supabase Vecs。您将能够识别与您（或任何其他人）外貌最相似的名人。您将：

1. 启动一个使用 pgvector 存储嵌入的 Postgres 数据库
1. 启动一个连接到您数据库的笔记本
1. 加载 "`ashraq/tmdb-people-image`" 名人数据集
1. 使用 `face_recognition` 模型为每张名人照片创建嵌入
1. 在数据集内搜索相似面孔

<$Partial path="database_setup.mdx" />

## 启动笔记本

在 Colab 中启动我们的 [`semantic_text_deduplication`](https://github.com/supabase/supabase/blob/master/examples/ai/face_similarity.ipynb) 笔记本：

<a
  className="w-64"
  href="https://colab.research.google.com/github/supabase/supabase/blob/master/examples/ai/face_similarity.ipynb"
>
  <img src="/docs/img/ai/colab-badge.svg" />
</a>

在笔记本顶部，您会看到一个 `复制到云端硬盘` 按钮。点击此按钮将笔记本复制到您的 Google 云端硬盘。

## 连接到您的数据库

在笔记本内，找到指定 `DB_CONNECTION` 的单元格。它将包含类似以下的代码：

```python
import vecs

DB_CONNECTION = "postgresql://<user>:<password>@<host>:<port>/<db_name>"

# create vector store client
vx = vecs.create_client(DB_CONNECTION)
```

用您自己的连接字符串替换 `DB_CONNECTION`。您可以通过点击[连接](https://supabase.com/dashboard/project/_?showConnect=true)在项目仪表板上找到连接字符串。

<Admonition type='note'>

SQLAlchemy 要求连接字符串以 `postgresql://`（而不是 `postgres://`）开头。从仪表板复制字符串后，不要忘记重命名此部分。

</Admonition>

<Admonition type='note'>

您必须使用"连接池"字符串（域名以 `*.pooler.supabase.com` 结尾）与 Google Colab 一起使用，因为 Colab 不支持 IPv6。

</Admonition>

## 逐步执行笔记本

现在剩下的就是逐步执行笔记本。您可以通过点击每个代码单元格左上角的"执行"按钮（`ctrl+enter`）来完成此操作。该笔记本指导您完成创建集合、向其添加数据和查询它的过程。

您可以在[表格编辑器](https://supabase.com/dashboard/project/_/editor/)中查看插入的项目，方法是从架构下拉列表中选择 `vecs` 架构。

![Colab 文档](/docs/img/ai/google-colab/colab-documents.png)

## 下一步

您现在可以开始使用 Vecs 构建自己的应用程序。查看我们的[示例](/docs/guides/ai#examples)获取灵感。
